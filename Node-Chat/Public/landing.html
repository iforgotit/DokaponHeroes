<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Dokapon Heroes</title>

    <!-- Bootstrap core CSS -->
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>
    <div class="container">

        <div class="row">
            <div class="col-md-8">
                <h2>Trash Talk</h2>
                <div class="panel-body" style="max-height: 10;">
                    <div class="list-group" id="lichat">
                    </div>
                </div>
                <form class="form-inline">
                    <div class="form-group col-md-10 col-sm-10">
                        <input type="text" class="form-control" style="width : 100%" id="txtMsg" placeholder="Message">
                    </div>
                    <input id="btnSend" type="button" class="btn btn-default" onclick="send()" value="Send">
                </form>
            </div>
            <div class="col-md-4">
                <br>
                <br>
                <input id="btnStart" type="button" class="btn btn-lg btn-primary" onclick="start()" value="Start Game">
            </div>

        </div>
        <p id="z"></p>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io();

            var chat = document.getElementById("lichat");
            var chatHTML = '<a class="list-group-item"><h4 class="list-group-item-heading">Welcome ' + localStorage.dname + '</h4><p class="list-group-item-text">Lets see what you got</p></a>';
            chat.innerHTML = chat.innerHTML + chatHTML;

            socket.on('chat', function (JSONmsg) {
                var chat = document.getElementById("lichat");
                var chatHTML = '<a class="list-group-item"><h4 class="list-group-item-heading">' + JSONmsg.dname + '</h4><p class="list-group-item-text">' + JSONmsg.msg + '</p></a>';
                chat.innerHTML = chat.innerHTML + chatHTML;
            });
        </script>
        <script>
            function send() {
                var JSONmsg = { "dname": localStorage.dname, "msg": document.getElementById("txtMsg").value }
                socket.emit('msg', JSONmsg);
                document.getElementById("txtMsg").value = "";
            }
        </script>

</body>

</html>